{
  // ASP.NET Core Host Configuration.
  // Allows the application to accept requests from any host.
  "AllowedHosts": "*",

  "JwtSettings": {
    "Issuer": "UserService.API",
    "SecretKey": "fPXxcJw8TW5sA+S4rl4tIPcKk+oXAqoRBo+1s2yjUS4="
  },

  // SERILOG CONFIGURATION SECTION
  "Serilog": {

    // Minimum Log Levels
    "MinimumLevel": {
      "Default": "Information", // Global minimum level. Only logs of this level or higher will be written.
      // Levels: Verbose < Debug < Information < Warning < Error < Fatal

      // Override rules to reduce noise from framework-level logs.
      "Override": {
        // Logs from Microsoft.* namespaces (e.g., ASP.NET internals) will be shown only
        // when they are "Error" or higher.
        "Microsoft": "Error",

        // Same as above, but for System.* namespaces (e.g., BCL libraries).
        "System": "Error",

        // Restrict Ocelot gateway logs to "Error" level and above.
        "Ocelot": "Error"
      }
    },

    // Global metadata automatically attached to every log entry.
    // These help identify which app/environment produced the log
    // when aggregating logs from multiple services.
    "Properties": {
      "Application": "APIGateway", // Custom tag for application name.
      "Environment": "Development" // Useful when running multiple environments (Dev/Staging/Prod).
    },

    // ---------------------------------------------------------------
    // OUTPUT (SINK) CONFIGURATIONS - Where Logs Are Written
    // ---------------------------------------------------------------
    "WriteTo": [
      {
        "Name": "Async",
        "Args": {
          "configure": [

            // ---------------- CONSOLE SINK ----------------
            {
              // Writes logs to the terminal (console window). It is handy during development
              "Name": "Console",

              "Args": {
                // Defines how each log line is formatted in the console.
                // Tokens in braces are placeholders replaced by property values at runtime.
                //
                // {Timestamp}   → When the log was created. Date and time of the log event
                // [{Level:u3}]  → Shortened Log level abbreviation (INF, WRN, ERR, etc.).
                // [{Application}/{Environment}] → Custom app/environment identifiers from Properties.
                // CorrelationId={CorrelationId} → Displays the correlation ID for tracing a request end-to-end.
                // {Message:lj}  → Main log message (with structured data if present, JSON Data).
                // {NewLine}{Exception} → Adds a newline and exception details (if any).
                "outputTemplate": "{Timestamp:yyyy-MM-dd HH:mm:ss} [{Level:u3}] [{Application}/{Environment}] CorrelationId={CorrelationId} {Message:lj}{NewLine}{Exception}"
              }
            }
          ]
        }
      },
      {
        "Name": "Async",
        "Args": {
          "configure": [
            // ---------------- FILE SINK ----------------
            {
              // Writes logs to disk files for persistence and later analysis.
              "Name": "File",

              "Args": {
                // Log file path and naming convention. 
                // The '-' will be replaced with the date when using rolling log files.
                // Example: logs/APIGateway-2025-10-21.log
                "path": "logs/APIGateway-.log",

                // Creates a new log file daily (helps keep files smaller and organized).
                "rollingInterval": "Day",

                // Keeps the last 30 log files and deletes older ones automatically.
                "retainedFileCountLimit": 30,

                // Allows multiple processes (if any) to write to the same log file safely.
                "shared": true,

                // Uses the same log format as the console output for consistency.
                "outputTemplate": "{Timestamp:yyyy-MM-dd HH:mm:ss} [{Level:u3}] [{Application}/{Environment}] CorrelationId={CorrelationId} {Message:lj}{NewLine}{Exception}"
              }
            }
          ]
        }
      }
    ]
  },

  "ServiceUrls": {
    "OrderService": "https://localhost:7082",
    "UserService": "https://localhost:7269",
    "ProductService": "https://localhost:7234",
    "PaymentService": "https://localhost:7154"
  },

  "CompressionSettings": {
    "Enabled": true,
    "CompressionThresholdBytes": 1024,
    "SupportedEncodings": [ "br", "gzip" ],
    "DefaultEncoding": "gzip"
  },

  "RateLimiting": {
    "IsEnabled": true,
    "DefaultPolicy": {
      "PermitLimit": 60,
      "Window": "00:01:00",
      "QueueLimit": 5,
      "QueueProcessingOrder": "OldestFirst"
    },
    "ProductApiPolicy": {
      "PermitLimit": 100,
      "Window": "00:01:00",
      "QueueLimit": 0,
      "QueueProcessingOrder": "OldestFirst"
    },
    "OrderApiPolicy": {
      "PermitLimit": 50,
      "Window": "00:01:00",
      "QueueLimit": 2,
      "QueueProcessingOrder": "OldestFirst"
    },
    "PaymentApiPolicy": {
      "PermitLimit": 5,
      "QueueLimit": 2,
      "QueueProcessingOrder": "OldestFirst"
    }
  }

}